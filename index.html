<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <meta charset="utf-8">
    <title>HangerFlow</title>
    <style>
   :root {
  --bg: #0b0f14;
  --panel: #121821;
  --ink: #e8eef7;
  --muted: #9fb0c3;
  --accent: #3aa0ff;
  --accent-2: #7bd389;
  --danger: #ff6b6b;
  --border: #1e2633;
  --chip: #1a2431;
  --table-row: #0e141b;
  --table-row-alt: #121a23;
}

html, body {
  margin: 0;
  padding: 0;
  background: var(--bg);
  color: var(--ink);
  font: 14px/1.4 Inter, Segoe UI, Roboto, Arial, sans-serif;
  display: flex;
  flex-direction: column;
  min-height: 100vh; /* ensures footer sticks to bottom */
}

main {
  flex: 1; /* pushes footer down when content is short */
}

/* Header base */
.app-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 16px;
  background: var(--panel);
  border-bottom: 1px solid var(--border);
  position: sticky;
  top: 0;
  z-index: 10;
}


.left-nav { display: flex; gap: 8px; }
.brand {
  display: flex;
  align-items: center;
  justify-content: center;
}
.brand-logo {
  height: 45px;
  width: auto;
  filter: brightness(1.05) contrast(1.05);
}





.spacer { flex: 1; }

.header-logo {
  display: flex;
  align-items: center;
  gap: 10px;
}
.header-logo img {
  height: 28px;
  width: auto;
  filter: brightness(0.95) contrast(1.05);
}

.nav-btn {
  background: transparent;
  color: var(--muted);
  border: none;
  padding: 6px 10px;
  font-size: 0.9rem;
  font-weight: 500;
  border-radius: 6px;
  cursor: pointer;
  transition: color 0.2s ease;
}
.nav-btn:hover {
  color: var(--ink);
}
.nav-btn.active {
  color: var(--accent);
  font-weight: 600;
  border-bottom: 2px solid var(--accent);
}



.header-logo img {
  height: 28px;
  width: auto;
  filter: brightness(0.95) contrast(1.05);
}

.page { display: none; padding: 16px; }
.page.active { display: block; }

.card {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 12px;
}

/* Stock toolbar */
.toolbar {
  display: flex;
  gap: 10px;
  align-items: center;
  flex-wrap: wrap;
  margin-bottom: 12px;
}

.search { position: relative; flex: 1; min-width: 240px; }
.search input {
  width: 100%;
  background: #0f1620;
  color: var(--ink);
  border: 1px solid var(--border);
  padding: 10px 12px;
  border-radius: 8px;
  outline: none;
}
.search input:focus { border-color: var(--accent); }

.chip {
  background: var(--chip);
  border: 1px solid var(--border);
  color: var(--muted);
  padding: 8px 10px;
  border-radius: 999px;
  cursor: pointer;
  user-select: none;
}
.chip.active {
  color: #fff;
  border-color: var(--accent-2);
  box-shadow: 0 0 0 2px rgba(123,211,137,0.15) inset;
    background-color: #0078d4; /* your highlight color */
  color: #fff;
}


/* Table */
.table-wrap {
  overflow: auto;
  max-height: calc(100vh - 180px);
  border: 1px solid var(--border);
  border-radius: 10px;
}
table { width: 100%; border-collapse: separate; border-spacing: 0; }
thead th {
  position: sticky;
  top: 0;
  background: #0d141c;
  color: #cfe3ff;
  text-align: left;
  padding: 10px;
  font-size: 12px;
  border-bottom: 1px solid var(--border);
  cursor: pointer;
}
tbody td {
  padding: 10px;
  border-bottom: 1px solid var(--border);
  white-space: nowrap;
}
tbody tr:nth-child(odd) { background: var(--table-row); }
tbody tr:nth-child(even) { background: var(--table-row-alt); }

.kpi {
  display: flex;
  gap: 12px;
  margin-bottom: 10px;
}
.kpi .pill {
  background: #0f1620;
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 8px 10px;
  color: var(--muted);
}
.pill strong { color: #fff; margin-left: 6px; }

.footerbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 6px;
  color: var(--muted);
}
.pager { display: flex; gap: 8px; align-items: center; }
.pager button {
  padding: 6px 10px;
  border-radius: 6px;
  border: 1px solid var(--border);
  background: #0f1620;
  color: var(--ink);
  cursor: pointer;
}
.sort-ind { margin-left: 6px; color: var(--muted); font-size: 12px; }
.muted { color: var(--muted); }

/* Page placeholders */
.placeholder {
  padding: 40px;
  text-align: center;
  color: var(--muted);
  border: 1px dashed var(--border);
  border-radius: 10px;
}

.upload-status { font-weight: bold; margin-top: 6px; color: var(--muted); }
.last-upload { font-size: 0.9em; color: var(--muted); }

/* Sticky footer styles */
.app-footer {
  background: var(--panel);
  border-top: 1px solid var(--border);
  padding: 8px 16px;
  font-size: 0.85rem;
  color: var(--muted);
}

/* Flex layout for content */
.footer-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 6px 12px;
}

/* Left/right spans */
.footer-content span {
  white-space: nowrap;
}

/* On narrow screens, stack neatly */
@media (max-width: 600px) {
  .footer-content {
    flex-direction: column;
    align-items: center;
    text-align: center;
  }
}


    </style>
<header class="app-header">
  <!-- Left navigation -->
  <div class="left-nav" id="leftNav">
    <button class="nav-btn active" data-route="stock">Stock</button>
    <button class="nav-btn" data-route="dispatch">Dispatched Orders</button>
    <button class="nav-btn" data-route="receiving">Receiving Stock</button>
  </div>

  <!-- Center: HangerFlow logo -->
  <div class="brand">
    <img src="https://drive.google.com/thumbnail?id=14aZ0hc9FRPCl_GI4ps1dtPnlyIarypaF&sz=w1000" 
         alt="HangerFlow Logo" class="brand-logo">
  </div>

  <div class="spacer"></div>

  <!-- Right: Premier Hangers logo + text -->
  <div class="header-logo">
    <img src="https://premierhangers.co.za/assets/images/image02.jpg?v=b8953020" 
         alt="Premier Hangers Pty Ltd">
  
  </div>
</header>


    <main>
      <!-- Stock Page -->
      <section id="page-stock" class="page active">
        <div class="card">
          <div class="toolbar">
            <div id="colourChips" class="chips"></div>
            <div class="search">
              <input type="text" id="searchInput" placeholder="Search item, colour or PH code...">
            </div>
          </div>

          <div id="uploadStatus" class="upload-status">Waiting…</div>
          <div id="lastUpload" class="last-upload">Last update: –</div>

          <div class="kpi">
            <div class="pill">Items<strong id="kpiItems">0</strong></div>
            <div class="pill">Total QTY<strong id="kpiTotalQty">0</strong></div>
            <div class="pill">Total Cartons<strong id="kpiCartons">0</strong></div>
          </div>

          <div class="table-wrap">
            <table id="stockTable">
              <thead><tr id="stockHeadRow"></tr></thead>
              <tbody id="stockBody"></tbody>
            </table>
          </div>

          <div class="footerbar">
            <div class="muted" id="rowInfo">0–0 of 0</div>
            <div class="pager">
              <button id="prevBtn">Prev</button>
              <span class="muted" id="pageNum">1</span>
              <button id="nextBtn">Next</button>
              <select id="pageSize" title="Rows per page">
                <option>25</option><option selected>50</option><option>100</option><option>200</option>
              </select>
            </div>
          </div>
        </div>
      </section>

      <!-- Dispatch Page -->
      <section id="page-dispatch" class="page">
        <div class="card">
          <div class="toolbar">
            <div id="dispatchChips" class="chips"></div>
            <div class="search">
              <input type="text" id="dispatchSearch" placeholder="Search Order Number, Colour, or Status…">
            </div>
          </div>

          <div class="kpi">
            <div class="pill">Orders<strong id="dispatchCount">0</strong></div>
            <div class="pill">Total Qty<strong id="dispatchQty">0</strong></div>
            <div class="pill">Total Cartons<strong id="dispatchCartons">0</strong></div>
          </div>

          <div class="table-wrap">
            <table id="dispatchTable">
              <thead><tr id="dispatchHeadRow"></tr></thead>
              <tbody id="dispatchBody"></tbody>
            </table>
          </div>

          <div class="footerbar">
            <div class="muted" id="dispatchRowInfo">0–0 of 0</div>
            <div class="pager">
              <button id="dispatchPrev">Prev</button>
              <span class="muted" id="dispatchPageNum">1</span>
              <button id="dispatchNext">Next</button>
              <select id="dispatchPageSize">
                <option>25</option><option selected>50</option><option>100</option><option>200</option>
              </select>
            </div>
          </div>
        </div>
      </section>

      <!-- Receiving Page -->
      <section id="page-receiving" class="page">
        <div class="placeholder">Receiving page — coming soon.</div>
      </section>
    </main>

    <script>


// Throttle rapid calls
window.debounce = window.debounce || function (fn, delay) {
  let t;
  return function (...args) {
    clearTimeout(t);
    t = setTimeout(() => fn.apply(this, args), delay);
  };
};

// Upload status text
window.setUploadStatus = window.setUploadStatus || function (text) {
  const el = document.getElementById('uploadStatus');
  if (el) el.textContent = text ?? '';
};

// "Last updated" stamp
window.updateLastUpload = window.updateLastUpload || function (d) {
  const el = document.getElementById('lastUpload');
  if (!el) return;
  const ts = window.formatDate ? window.formatDate(d) : '';
  el.textContent = `Last update: ${ts || '–'}`;
};

// Consistent date formatting
window.formatDate = window.formatDate || function (d) {
  let dt = d instanceof Date ? d : new Date(d);
  if (!(dt instanceof Date) || isNaN(dt)) return '';
  return dt.toLocaleString('en-ZA', {
    year: 'numeric', month: 'short', day: '2-digit',
    hour: '2-digit', minute: '2-digit', hour12: false
  });
};

// Filter/colour chip button
window.makeChip = window.makeChip || function (label, isActive, _value, onClick) {
  const chip = document.createElement('button');
  chip.type = 'button';
  chip.className = 'chip' + (isActive ? ' active' : '');
  chip.textContent = label;
  chip.addEventListener('click', onClick, { passive: true });
  return chip;
};

// Group flat dispatch rows by order number
window.groupByOrder = window.groupByOrder || function (rows) {
  const map = Object.create(null);
  (rows || []).forEach(r => {
    const key = String(r['Order Number'] ?? r.order ?? '').trim();
    if (!map[key]) map[key] = { order: key, rows: [] };
    map[key].rows.push(r);
  });
  return Object.values(map);
};

// Filter dispatch groups by search/colour
window.applyDispatchFilters = window.applyDispatchFilters || function (groups) {
  const search = (STATE.dispatch.filters.search || '').toLowerCase();
  const colour = STATE.dispatch.filters.colour || null;
  return (groups || []).filter(g => {
    const text = g.rows.map(r =>
      `${r['Order Number']} ${r['Item ID']} ${r['Colour']} ${r['Status']} ${r['User']}`
    ).join(' ').toLowerCase();
    const matchesSearch = !search || text.includes(search);
    const matchesColour = !colour || g.rows.some(r => 
      (r['Colour'] || '').toLowerCase() === String(colour).toLowerCase()
    );
    return matchesSearch && matchesColour;
  });
};

// Keep grouped orders together in pagination
window.paginateGroups = window.paginateGroups || function (groups, pageSize) {
  const pages = [];
  let current = { rows: [] };
  let count = 0;
  (groups || []).forEach(g => {
    const gSize = g.rows?.length || 1;
    if (count > 0 && count + gSize > pageSize) {
      pages.push(current);
      current = { rows: [] };
      count = 0;
    }
    current.rows.push(...g.rows);
    count += gSize;
  });
  if (current.rows.length) pages.push(current);
  return pages;
};

const API = {
  baseUrl: 'https://script.google.com/macros/s/AKfycbzCF7yUZiprbPZtqCIRj6cy5iXaFYxs2iR22fArEFkIRG8Xq38DHcpzIz232OiKOPrdwg/exec',
  resource: 'stock',
  useJsonpFallback: true
};

/***************
 * GLOBAL STATE
 ***************/
const STATE = {
  stock: {
    data: [], filtered: [],
    sortKey: 'Colour', sortDir: 'asc',
    page: 1, pageSize: 50, colourFilter: null,
    columns: ['timestamp','Colour','QTY Per Carton','Total Cartons','Total QTY','PH Code']
  },
  dispatch: {
    raw: [], groups: [], filteredGroups: [], pages: [],
    pageIndex: 0, pageSize: 50, filters: { search: '', colour: null }
  },
  receiving: {
    data: [], page: 1, pageSize: 50
  }
};

/***************
 * INIT
 ***************/
document.addEventListener('DOMContentLoaded', () => {
  setupNav();
  setupStockUI();
  setupDispatchUI();
  loadStock();
  switchPage('stock');
});

/***************
 * NAVIGATION
 ***************/
function setupNav() {
  document.getElementById('leftNav').addEventListener('click', (e) => {
    const btn = e.target.closest('.nav-btn');
    if (!btn) return;
    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    switchPage(btn.dataset.route);
  });
}
function switchPage(route) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById(`page-${route}`)?.classList.add('active');
  if (route === 'stock') loadStock();
  if (route === 'dispatch') loadDispatch();
  if (route === 'receiving') loadReceiving();
}

/***************
 * STOCK
 ***************/
// ---------- STATE SHAPE ----------
// ---------- STATE ----------
STATE.stock = {
  data: [],
  filtered: [],
  columns: ['timestamp','Colour','QTY Per Carton','Total Cartons','Total QTY','PH Code'],

  colourFilter: null,
  sortKey: 'PH Code',
  sortDir: 'asc',

  page: 1,
  pageSize: 50,
  totalPages: 1
};

// ---------- SETUP ----------
function setupStockUI() {
  const head = document.getElementById('stockHeadRow');
  head.innerHTML = '';
  STATE.stock.columns.forEach(col => {
    const th = document.createElement('th');
    th.textContent = col;
    th.addEventListener('click', () => toggleStockSort(col));
    head.appendChild(th);
  });

  // search
  document.getElementById('searchInput').addEventListener('input', debounce(() => {
    STATE.stock.page = 1;
    computeStockDerived();
    renderStock();
  }, 120));

  // pager controls
  const prevBtn = document.getElementById('stockPrevBtn');
  const nextBtn = document.getElementById('stockNextBtn');
  const sizeSel = document.getElementById('stockPerPageSelect');

  if (prevBtn) prevBtn.addEventListener('click', () => goToStockPage(STATE.stock.page - 1));
  if (nextBtn) nextBtn.addEventListener('click', () => goToStockPage(STATE.stock.page + 1));
  if (sizeSel) sizeSel.addEventListener('change', (e) => {
    const v = parseInt(e.target.value, 10);
    if (!Number.isNaN(v) && v > 0) {
      STATE.stock.pageSize = v;
      STATE.stock.page = 1;
      computeStockDerived();
      renderStock();
    }
  });
}

// ---------- DATA LOAD ----------
function loadStock() {
  setUploadStatus('Loading…');
  fetch(`${API.baseUrl}?dataset=stock`)
    .then(res => res.json())
    .then(payload => {
      STATE.stock.data = (payload.rows || []).map(r => ({
        timestamp: r.timestampIso || r.timestamp || '',
        Colour: r['Colour'],
        'QTY Per Carton': r['QTY Per Carton'],
        'Total Cartons': r['Total Cartons'],
        'Total QTY': r['Total QTY'],
        'PH Code': r['PH Code'],
        _searchKey: `${r['Colour'] || ''} ${r['PH Code'] || ''}`.toLowerCase()
      }));

      buildStockChips();
      computeStockDerived();
      renderStock();

      updateLastUpload(new Date());
      setUploadStatus('Loaded');
    })
    .catch(err => { console.error(err); setUploadStatus('Failed'); });
}

// ---------- CHIPS ----------
function buildStockChips() {
  const wrap = document.getElementById('colourChips');
  wrap.innerHTML = '';

  const makeActiveChip = (label, value) => {
    const isActive = STATE.stock.colourFilter === value;
    const chip = makeChip(label, isActive, value, () => {
      STATE.stock.colourFilter = value;
      STATE.stock.page = 1;
      computeStockDerived();
      renderStock();
      buildStockChips();
    });
    if (isActive) chip.classList.add('active');
    return chip;
  };

  wrap.appendChild(makeActiveChip('All', null));

  const colours = [...new Set(
    STATE.stock.data.map(r => (r.Colour || '').toLowerCase().trim())
  )].filter(Boolean).sort();

  colours.forEach(c => wrap.appendChild(makeActiveChip(c, c)));
}

// ---------- DERIVATION ----------
function computeStockDerived() {
  const q = (document.getElementById('searchInput')?.value || '').trim().toLowerCase();
  const cf = STATE.stock.colourFilter;

  let out = STATE.stock.data;

  if (q) out = out.filter(r => r._searchKey.includes(q));
  if (cf !== null) out = out.filter(r => (r.Colour || '').toLowerCase().trim() === cf);

  const key = STATE.stock.sortKey;
  const dir = STATE.stock.sortDir === 'asc' ? 1 : -1;

  const numericCols = new Set(['QTY Per Carton','Total Cartons','Total QTY']);
  const isDate = key === 'timestamp';
  const isNumeric = numericCols.has(key);

  out = out.slice().sort((a, b) => {
    const av = a[key];
    const bv = b[key];
    let cmp = 0;

    if (isDate) {
      cmp = (new Date(av).getTime() || 0) - (new Date(bv).getTime() || 0);
    } else if (isNumeric) {
      const an = parseFloat(av) || 0;
      const bn = parseFloat(bv) || 0;
      cmp = an - bn;
    } else {
      cmp = String(av ?? '').localeCompare(String(bv ?? ''), undefined, { numeric: true, sensitivity: 'base' });
    }

    if (cmp === 0) {
      cmp = String(a['PH Code'] ?? '').localeCompare(String(b['PH Code'] ?? ''), undefined, { numeric: true, sensitivity: 'base' })
         || String(a['Colour'] ?? '').localeCompare(String(b['Colour'] ?? ''), undefined, { numeric: true, sensitivity: 'base' })
         || ((new Date(a.timestamp).getTime() || 0) - (new Date(b.timestamp).getTime() || 0));
    }
    return cmp * dir;
  });

  STATE.stock.filtered = out;

  const len = out.length;
  const ps = STATE.stock.pageSize;
  STATE.stock.totalPages = Math.max(1, Math.ceil(len / ps));

  // clamp page to available range
  STATE.stock.page = Math.min(Math.max(STATE.stock.page, 1), STATE.stock.totalPages);
}

// ---------- RENDER ----------
function renderStock() {
  const body = document.getElementById('stockBody');
  body.innerHTML = '';

  const ps = STATE.stock.pageSize;
  const p = STATE.stock.page;
  const start = (p - 1) * ps;
  const end = start + ps;

  const pageRows = STATE.stock.filtered.slice(start, end);

  if (pageRows.length === 0) {
    const tr = document.createElement('tr');
    const td = document.createElement('td');
    td.colSpan = STATE.stock.columns.length;
    td.textContent = 'No stock to display';
    tr.appendChild(td);
    body.appendChild(tr);
  } else {
    pageRows.forEach(r => {
      const tr = document.createElement('tr');
      STATE.stock.columns.forEach(col => {
        const td = document.createElement('td');
        if (col === 'timestamp' && r[col]) {
          td.textContent = new Date(r[col]).toLocaleString('en-ZA', { hour12: false, timeZone: 'Africa/Johannesburg' });
        } else {
          td.textContent = r[col] ?? '';
        }
        tr.appendChild(td);
      });
      body.appendChild(tr);
    });
  }

  updateStockPager();
  updateStockTotals();
}

// ---------- PAGER LABEL + BUTTONS ----------
function updateStockPager() {
  const label = document.getElementById('stockPagerLabel');
  const prevBtn = document.getElementById('stockPrevBtn');
  const nextBtn = document.getElementById('stockNextBtn');

  const p = STATE.stock.page;
  const t = STATE.stock.totalPages;

  if (label) label.textContent = `${p} / ${t}`;
  if (prevBtn) prevBtn.disabled = p <= 1;
  if (nextBtn) nextBtn.disabled = p >= t;
}

function goToStockPage(n) {
  STATE.stock.page = Math.min(Math.max(n, 1), STATE.stock.totalPages);
  renderStock();
}

function toggleStockSort(col) {
  if (STATE.stock.sortKey === col) {
    STATE.stock.sortDir = STATE.stock.sortDir === 'asc' ? 'desc' : 'asc';
  } else {
    STATE.stock.sortKey = col;
    STATE.stock.sortDir = 'asc';
  }
  computeStockDerived();
  renderStock();
}

// ---------- TOTALS ----------
function updateStockTotals() {
  const itemsEl   = document.getElementById('stockTotalItems');
  const qtyEl     = document.getElementById('stockTotalQty');
  const cartonsEl = document.getElementById('stockTotalCartons');

  const rows = STATE.stock.filtered;
  const totalItems   = rows.length;
  const totalQty     = rows.reduce((sum, r) => sum + (parseFloat(r['Total QTY']) || 0), 0);
  const totalCartons = rows.reduce((sum, r) => sum + (parseFloat(r['Total Cartons']) || 0), 0);

  if (itemsEl)   itemsEl.textContent  
/***************
 * DISPATCH
 ***************/
function setupDispatchUI() {
  document.getElementById('dispatchSearch').addEventListener('input', debounce(() => {
    STATE.dispatch.filters.search = document.getElementById('dispatchSearch').value.trim().toLowerCase();
    recomputeDispatch();
  }, 120));
}
function loadDispatch() {
  fetch(`${API.baseUrl}?dataset=dispatch`)
    .then(res => res.json())
    .then(payload => {
      STATE.dispatch.raw = (payload.rows||[]).map(r => {
        const iso = r.timestampIso || r['Timestamp'] || '';
        const d = new Date(iso);
        return {
          ...r,
          _ts: isNaN(d) ? new Date(0) : d,
          _tsDisplay: isNaN(d) ? String(r['Timestamp']||'') : formatDate(d),
          _rowUid: `${String(r['Order Number']||'').trim()}::${String(r['Item ID']||'').trim()}::${iso}`
        };
      });
      buildDispatchChips();
      recomputeDispatch();
    }).catch(err => console.error(err));
}
function buildDispatchChips() {
  const wrap = document.getElementById('dispatchChips');
  wrap.innerHTML = '';
  const colours = [...new Set(STATE.dispatch.raw.map(r => r['Colour']).filter(Boolean))].sort();
  wrap.appendChild(makeChip('All', !STATE.dispatch.filters.colour, null, () => { STATE.dispatch.filters.colour=null; recomputeDispatch(); }));
  colours.forEach(c => {
    wrap.appendChild(makeChip(c, STATE.dispatch.filters.colour===c, c, () => { STATE.dispatch.filters.colour=c; recomputeDispatch(); }));
  });
}
function recomputeDispatch() {
  let groups = groupByOrder(STATE.dispatch.raw);
  groups = applyDispatchFilters(groups);
  STATE.dispatch.filteredGroups = groups;
  STATE.dispatch.pages = paginateGroups(groups, STATE.dispatch.pageSize);
  renderDispatch();
}
function renderDispatch() {
  const body = document.getElementById('dispatchBody');
  body.innerHTML = '';
  const page = STATE.dispatch.pages[STATE.dispatch.pageIndex] || { rows: [] };
  if (!page.rows.length) { body.innerHTML='<tr><td colspan="9" class="muted">No rows</td></tr>'; return; }
  page.rows.forEach(r => {
    const tr = document.createElement('tr');
    ['_tsDisplay','Order Number','Item ID','Colour','Qty Per Carton','Total Cartons','Total Qty','Status','User']
    .forEach(k => {
      const td = document.createElement('td');
      td.textContent = r[k] ?? '';
      tr.appendChild(td);
    });
    body.appendChild(tr);
  });
}

/***************
 * RECEIVING
 ***************/
function loadReceiving() {
  fetch(`${API.baseUrl}?dataset=receiving`)
    .then(res => res.json())
    .then(payload => {
      STATE.receiving.data = payload.rows || [];
      console.log('Receiving rows', STATE.receiving.data);
      // TODO: render table like stock
    })
    .catch(err => console.error(err));
}

    </script>
 <footer class="app-footer">
  <div class="footer-content">
    <span>Created by Thurston.   HangerFlow © 2025 </span>
    <span>Premierhangers (PTY) LTD </span>
  </div>
</footer>

  </body>
</html>














